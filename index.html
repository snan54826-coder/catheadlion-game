<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>认养一只猫头狮</title>
  <style>
    :root { --bg:#0b0f17; --card:#131a26; --text:#e7eefc; --muted:#9bb0d2; --line:#233149; --btn:#1f6feb; --ok:#22c55e; }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(1200px 800px at 20% 10%, #1b2a4a 0%, var(--bg) 55%),
                  radial-gradient(900px 600px at 80% 20%, #2b1845 0%, transparent 60%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      padding:18px;
    }
    .app{ width:min(980px, 100%); }
    .top{
      display:flex; gap:14px; align-items:center; justify-content:space-between;
      margin-bottom:14px;
    }
    .brand h1{ margin:0; font-size:18px; letter-spacing:.3px; }
    .brand p{ margin:6px 0 0; font-size:12px; color:var(--muted); }

    .progressWrap{ flex:1; max-width:460px; display:flex; align-items:center; gap:10px; }
    .bar{ height:10px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10);
          border-radius:999px; overflow:hidden; flex:1; }
    .bar > div{ height:100%; width:0%; background:linear-gradient(90deg, #22c55e, #60a5fa); transition:width .35s ease; }
    .pct{ font-size:12px; color:var(--muted); min-width:52px; text-align:right; }

    .card{
      background:rgba(19,26,38,.86);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      border-radius:18px;
      overflow:hidden;
    }
    .pane{ padding:18px; display:none; }
    .pane.active{ display:block; }

    .bigTitle{ font-size:22px; margin:0 0 8px; }
    .desc{ margin:0; color:var(--muted); line-height:1.6; font-size:13px; }

    .grid{
      display:grid; grid-template-columns:repeat(2, minmax(0,1fr));
      gap:12px; margin-top:14px;
    }
    @media (max-width:720px){ .grid{ grid-template-columns:1fr; } .progressWrap{ display:none; } }

    .opt{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:14px;
      cursor:pointer;
      transition:transform .08s ease, border-color .2s ease, background .2s ease;
      position:relative;
      user-select:none;
    }
    .opt:hover{ transform:translateY(-1px); border-color:rgba(96,165,250,.55); background:rgba(96,165,250,.08); }
    .opt .tag{ font-size:11px; color:var(--muted); }
    .opt .name{ font-weight:700; margin-top:6px; }
    .opt .hint{ margin-top:6px; font-size:12px; color:var(--muted); line-height:1.45; }
    .opt.selected{ border-color:rgba(34,197,94,.7); background:rgba(34,197,94,.10); }
    .opt.selected::after{
      content:"✓"; position:absolute; top:10px; right:12px;
      width:22px; height:22px; display:grid; place-items:center;
      border-radius:999px; background:rgba(34,197,94,.18); border:1px solid rgba(34,197,94,.55);
      color:var(--text); font-weight:900;
    }

    .footer{
      display:flex; gap:10px; justify-content:space-between; align-items:center;
      margin-top:16px; flex-wrap:wrap;
    }
    .btn{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      font-weight:650;
    }
    .btn.primary{ background:linear-gradient(180deg, rgba(31,111,235,.95), rgba(31,111,235,.75)); border-color:rgba(31,111,235,.65); }
    .btn:disabled{ opacity:.45; cursor:not-allowed; }
    .mini{ font-size:12px; color:var(--muted); }
    .sep{ height:1px; background:rgba(255,255,255,.10); margin:12px 0; }

    /* 结果页证书/人格卡 */
    .certWrap{ display:flex; gap:14px; flex-wrap:wrap; align-items:flex-start; }
    .cert{
      width:min(560px, 100%);
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background:linear-gradient(180deg, rgba(96,165,250,.15), rgba(34,197,94,.10));
    }
    .certHeader{ padding:16px; border-bottom:1px solid rgba(255,255,255,.14); }
    .certHeader h2{ margin:0 0 6px; font-size:18px; }
    .certHeader p{ margin:0; color:var(--muted); font-size:12px; line-height:1.55; }

    /* 人格图展示区域 */
    .personaPicWrap{
      padding:16px;
      border-bottom:1px solid rgba(255,255,255,.14);
      display:flex; gap:14px; align-items:center; flex-wrap:wrap;
    }
    .personaPic{
      width:120px; height:120px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.14);
      overflow:hidden;
      display:grid;
      place-items:center;
    }
    .personaPic img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .personaPicFallback{
      font-size:12px;
      color:var(--muted);
      padding:10px;
      text-align:center;
      line-height:1.4;
    }
    .personaText{
      min-width:220px;
      flex:1;
    }
    .personaText b{ display:block; font-size:14px; }
    .personaText span{ display:block; margin-top:6px; color:var(--muted); font-size:12px; line-height:1.55; }

    .certBody{ padding:16px; display:grid; gap:10px; }
    .kv{ display:flex; justify-content:space-between; gap:10px; border:1px solid rgba(255,255,255,.12);
         border-radius:14px; padding:10px 12px; background:rgba(0,0,0,.12); }
    .kv b{ font-size:13px; }
    .kv span{ color:var(--muted); font-size:13px; }

    .rightCol{ flex:1; min-width:240px; }
    .smallInput{
      width:100%;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);
      color:var(--text);
      padding:10px 12px; border-radius:12px;
      outline:none;
    }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .row .btn{ flex:1; min-width:180px; }
  </style>
</head>
<body>
  <div class="app">
    <div class="top">
      <div class="brand">
        <h1>认养一只猫头狮</h1>
        <p>30秒完成，生成你的猫头狮人格卡</p>
      </div>
      <div class="progressWrap">
        <div class="bar"><div id="barFill"></div></div>
        <div class="pct" id="pctText">0%</div>
      </div>
    </div>

    <div class="card">
      <!-- 开始页 -->
      <div class="pane active" data-step="0">
        <h2 class="bigTitle">领取你的猫头狮</h2>
        <p class="desc">用 6 次选择认养一只猫头狮，完成后会生成专属人格卡（可截图分享）。</p>
        <div class="footer">
          <span class="mini"></span>
          <button class="btn primary" onclick="goNext()">开始</button>
        </div>
      </div>

      <!-- 1 -->
      <div class="pane" data-step="1">
        <h2 class="bigTitle">第 1 步：你在哪里遇见它？</h2>
        <p class="desc">选一个最接近的场景。</p>
        <div class="grid" id="q1"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="next1" onclick="goNext()" disabled>下一步</button>
        </div>
      </div>

      <!-- 2 -->
      <div class="pane" data-step="2">
        <h2 class="bigTitle">第 2 步：它更像哪种猫头狮？</h2>
        <p class="desc">按直觉选择。</p>
        <div class="grid" id="q2"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="next2" onclick="goNext()" disabled>下一步</button>
        </div>
      </div>

      <!-- 3 -->
      <div class="pane" data-step="3">
        <h2 class="bigTitle">第 3 步：给它选一套皮肤配色</h2>
        <p class="desc">选你觉得好看的。</p>
        <div class="grid" id="q3"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="next3" onclick="goNext()" disabled>下一步</button>
        </div>
      </div>

      <!-- 4 -->
      <div class="pane" data-step="4">
        <h2 class="bigTitle">第 4 步：它要带什么出门？</h2>
        <p class="desc">选你更想要的类型。</p>
        <div class="grid" id="q4"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="next4" onclick="goNext()" disabled>下一步</button>
        </div>
      </div>

      <!-- 5 -->
      <div class="pane" data-step="5">
        <h2 class="bigTitle">第 5 步：你愿意花多少钱带走它？</h2>
        <p class="desc">选你最舒服的价格区间。</p>
        <div class="grid" id="q5"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="next5" onclick="goNext()" disabled>下一步</button>
        </div>
      </div>

      <!-- 6 -->
      <div class="pane" data-step="6">
        <h2 class="bigTitle">第 6 步：让更多人看见它，你更愿意？</h2>
        <p class="desc">选你最愿意的方式。</p>
        <div class="grid" id="q6"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">上一步</button>
          <button class="btn primary" id="finish" onclick="finish()" disabled>生成我的人格卡</button>
        </div>
      </div>

      <!-- 结果页 -->
      <div class="pane" data-step="7">
        <h2 class="bigTitle">你的猫头狮人格卡</h2>
        <p class="desc">截图分享给朋友看看你是哪一型～</p>

        <div class="certWrap">
          <div class="cert" id="cert">
            <div class="certHeader">
              <h2 id="certTitle">你的猫头狮人格：—</h2>
              <p id="certSub">—</p>
            </div>

            <!-- ✅ 人格图片展示位置（会自动换图） -->
            <div class="personaPicWrap">
              <div class="personaPic" id="personaPic">
                <div class="personaPicFallback" id="personaPicFallback">
                  （这里显示对应人格的猫头狮图片）<br/>
                  请上传 assets/*.png
                </div>
              </div>
              <div class="personaText">
                <b id="personaName">—</b>
                <span id="personaVibe">—</span>
              </div>
            </div>

            <div class="certBody" id="certBody"></div>
          </div>

          <div class="rightCol">
            <p class="desc">想参与后续体验/内测可留下联系方式（选填）。</p>
            <input class="smallInput" id="contact" placeholder="微信/QQ/邮箱（选填）" />
            <div class="row">
              <button class="btn primary" onclick="copySummary()">复制我的结果</button>
              <button class="btn" onclick="restart()">再认养一次</button>
            </div>
          </div>
        </div>

        <div class="footer">
          <button class="btn" onclick="goPrev()">返回上一页</button>
          <span class="mini"></span>
        </div>
      </div>
    </div>
  </div>

<script>
  // ===== 题目（可直接改文案） =====
  const questions = {
    q1: {
      key: "meet",
      nextBtnId: "next1",
      options: [
        { label:"河源本地", tag:"本地", hint:"我在河源生活/成长", value:"河源本地" },
        { label:"在河源学习/工作", tag:"常驻", hint:"在河源上学或上班", value:"在河源学习/工作" },
        { label:"来河源旅游", tag:"游客", hint:"短期到访/旅行", value:"来河源旅游" },
        { label:"线上刷到", tag:"线上", hint:"短视频/社交平台看到", value:"线上刷到" },
      ]
    },
    q2: {
      key: "style",
      nextBtnId: "next2",
      options: [
        { label:"传统威武", tag:"原味", hint:"更强调仪式感与气势", value:"传统威武", typeScore:{trad:2} },
        { label:"Q版可爱", tag:"治愈", hint:"更亲和，适合做周边", value:"Q版可爱", typeScore:{cute:2} },
        { label:"国潮酷炫", tag:"潮流", hint:"更适合潮玩/联名", value:"国潮酷炫", typeScore:{cool:2} },
        { label:"极简符号", tag:"设计", hint:"更现代，更像logo/图形", value:"极简符号", typeScore:{minimal:2} },
      ]
    },
    q3: {
      key: "color",
      nextBtnId: "next3",
      options: [
        { label:"红金传统", tag:"喜庆", hint:"节庆氛围强，辨识度高", value:"红金传统", typeScore:{trad:1} },
        { label:"低饱和新中式", tag:"耐看", hint:"更温柔更高级", value:"低饱和新中式", typeScore:{minimal:1} },
        { label:"黑金酷炫", tag:"酷感", hint:"更潮更酷", value:"黑金酷炫", typeScore:{cool:1} },
        { label:"彩色潮玩", tag:"活泼", hint:"更跳脱更年轻", value:"彩色潮玩", typeScore:{cute:1, cool:1} },
      ]
    },
    q4: {
      key: "product",
      nextBtnId: "next4",
      options: [
        { label:"徽章/冰箱贴", tag:"小物", hint:"便宜好带，适合纪念", value:"徽章/冰箱贴", typeScore:{minimal:1} },
        { label:"帆布袋/服饰", tag:"穿戴", hint:"日常可用，曝光率高", value:"帆布袋/服饰", typeScore:{cool:1} },
        { label:"手办/盲盒", tag:"潮玩", hint:"收藏属性强", value:"手办/盲盒", typeScore:{cool:2} },
        { label:"文具/贴纸", tag:"学习", hint:"学生党友好", value:"文具/贴纸", typeScore:{cute:1} },
        { label:"手作体验券", tag:"体验", hint:"参与感强", value:"手作体验券", typeScore:{trad:1, cute:1} },
      ]
    },
    q5: {
      key: "price",
      nextBtnId: "next5",
      options: [
        { label:"≤29元", tag:"入门", hint:"随手买", value:"≤29元" },
        { label:"30–59元", tag:"常见", hint:"多数小物/文具", value:"30–59元" },
        { label:"60–99元", tag:"礼物", hint:"小礼品更体面", value:"60–99元" },
        { label:"100–199元", tag:"品质", hint:"更有质感", value:"100–199元" },
        { label:"200元以上", tag:"收藏", hint:"手工/限定", value:"200元以上" },
      ]
    },
    q6: {
      key: "channel",
      nextBtnId: "finish",
      options: [
        { label:"短视频/直播", tag:"线上", hint:"快、容易扩散", value:"短视频/直播" },
        { label:"线下演出+讲解", tag:"现场", hint:"氛围最强", value:"线下演出+讲解" },
        { label:"手作体验课", tag:"体验", hint:"做一次就记住", value:"手作体验课" },
        { label:"校园活动/社团", tag:"校园", hint:"触达更稳定", value:"校园活动/社团" },
        { label:"AR滤镜/小游戏", tag:"互动", hint:"好玩好分享", value:"AR滤镜/小游戏" },
      ]
    },
  };

  // ===== 人格图片映射：把图片上传到这些路径即可 =====
  const personaImages = {
    trad:    "assets/trad.png",
    cute:    "assets/cute.png",
    cool:    "assets/cool.png",
    minimal: "assets/minimal.png",
  };

  // ===== 状态 =====
  let step = 0;
  const answers = {};
  let typeScore = { trad:0, cute:0, cool:0, minimal:0 };

  function renderAll(){
    renderQuestion("q1");
    renderQuestion("q2");
    renderQuestion("q3");
    renderQuestion("q4");
    renderQuestion("q5");
    renderQuestion("q6");
    updateProgress();
  }

  function renderQuestion(qid){
    const q = questions[qid];
    const el = document.getElementById(qid);
    el.innerHTML = "";
    q.options.forEach((opt) => {
      const d = document.createElement("div");
      d.className = "opt";
      d.innerHTML = `
        <div class="tag">${opt.tag}</div>
        <div class="name">${opt.label}</div>
        <div class="hint">${opt.hint}</div>
      `;
      d.onclick = () => selectOption(qid, opt.value, opt.typeScore || null, d);
      el.appendChild(d);
    });
  }

  function selectOption(qid, value, scoreObj, clickedEl){
    const q = questions[qid];
    answers[q.key] = value;

    // UI 选中态
    const parent = document.getElementById(qid);
    [...parent.children].forEach(c => c.classList.remove("selected"));
    clickedEl.classList.add("selected");

    // 重算人格分（避免改选项导致叠加）
    recomputeTypeScore();

    // 开启下一步按钮
    const btn = document.getElementById(q.nextBtnId);
    btn.disabled = false;
  }

  function recomputeTypeScore(){
    typeScore = { trad:0, cute:0, cool:0, minimal:0 };
    for (const qid in questions){
      const q = questions[qid];
      const chosenValue = answers[q.key];
      if (!chosenValue) continue;
      const opt = q.options.find(o => o.value === chosenValue);
      if (opt && opt.typeScore){
        for (const k in opt.typeScore){
          typeScore[k] += opt.typeScore[k];
        }
      }
    }
  }

  function showStep(s){
    step = s;
    document.querySelectorAll(".pane").forEach(p => p.classList.remove("active"));
    document.querySelector(`.pane[data-step="${s}"]`).classList.add("active");
    updateProgress();
    window.scrollTo({top:0, behavior:"smooth"});
  }
  function goNext(){ showStep(Math.min(step + 1, 7)); }
  function goPrev(){ showStep(Math.max(step - 1, 0)); }

  function updateProgress(){
    const pct = Math.round((Math.min(step,6) / 6) * 100);
    document.getElementById("barFill").style.width = pct + "%";
    document.getElementById("pctText").textContent = pct + "%";
  }

  function finish(){
    const required = ["meet","style","color","product","price","channel"];
    const missing = required.filter(k => !answers[k]);
    if (missing.length) { alert("还有选项没选完噢～"); return; }

    const persona = calcPersona();
    buildCard(persona);
    showStep(7);
  }

  function calcPersona(){
    const entries = Object.entries(typeScore);
    entries.sort((a,b)=> b[1]-a[1]);
    const top = entries[0]?.[0] || "cute";

    const map = {
      trad:    { key:"trad",    name:"传统守护型", vibe:"你更偏爱仪式感与文化原味，喜欢“有来历、有寓意”的表达。", rec:["线下演出+讲解","手作体验课"], products:["礼盒/伴手礼","工艺感纪念品","带溯源卡摆件"] },
      cute:    { key:"cute",    name:"治愈萌系型", vibe:"你更喜欢亲和可爱的表达，适合做日常小物与校园传播。", rec:["短视频/直播","校园活动/社团"], products:["贴纸/文具","徽章/冰箱贴","挂件/毛绒"] },
      cool:    { key:"cool",    name:"国潮玩家型", vibe:"你偏爱潮流酷感与收藏属性，更适合潮玩与联名路线。", rec:["短视频/直播","AR滤镜/小游戏"], products:["手办/盲盒","联名服饰","酷炫摆件"] },
      minimal: { key:"minimal", name:"极简设计型", vibe:"你偏爱简洁耐看的符号化设计，适合新中式与日用路线。", rec:["图文科普","城市打卡"], products:["日用小物","新中式家居","logo化配饰"] },
    };
    return map[top] || map.cute;
  }

  function buildCard(persona){
    document.getElementById("certTitle").textContent = `你的猫头狮人格：${persona.name}`;
    document.getElementById("certSub").textContent = `完成认养！这是你的专属猫头狮人格卡。`;

    // 人格图
    const picWrap = document.getElementById("personaPic");
    const fallback = document.getElementById("personaPicFallback");
    picWrap.innerHTML = ""; // 清空
    const img = new Image();
    img.alt = persona.name;
    img.src = personaImages[persona.key] || "";
    img.onload = () => {
      picWrap.appendChild(img);
    };
    img.onerror = () => {
      // 如果图片没放对路径，就展示占位文字
      picWrap.innerHTML = `<div class="personaPicFallback">未找到图片：<br/>${escapeHtml(img.src || "(空)")}</div>`;
    };

    document.getElementById("personaName").textContent = persona.name;
    document.getElementById("personaVibe").textContent = persona.vibe;

    const body = document.getElementById("certBody");
    body.innerHTML = "";
    const rows = [
      ["遇见地点", answers.meet],
      ["形象风格", answers.style],
      ["皮肤配色", answers.color],
      ["更想要的文创", answers.product],
      ["舒适价格带", answers.price],
      ["传播偏好", answers.channel],
      ["推荐传播", persona.rec.join(" / ")],
      ["推荐产品", persona.products.join(" / ")],
    ];
    rows.forEach(([k,v])=>{
      const div = document.createElement("div");
      div.className = "kv";
      div.innerHTML = `<b>${k}</b><span>${escapeHtml(String(v))}</span>`;
      body.appendChild(div);
    });
  }

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, (c)=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));
  }

  function copySummary(){
    const lines = [
      "【我的猫头狮人格卡】",
      `遇见：${answers.meet || ""}`,
      `风格：${answers.style || ""}`,
      `配色：${answers.color || ""}`,
      `文创：${answers.product || ""}`,
      `价格：${answers.price || ""}`,
      `传播：${answers.channel || ""}`,
    ].join("\n");

    navigator.clipboard?.writeText(lines).then(()=>{
      alert("已复制！");
    }).catch(()=>{
      const ta = document.createElement("textarea");
      ta.value = lines;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      alert("已复制！");
    });
  }

  function restart(){
    for (const k in answers) delete answers[k];
    typeScore = { trad:0, cute:0, cool:0, minimal:0 };

    ["q1","q2","q3","q4","q5","q6"].forEach(qid=>{
      const wrap = document.getElementById(qid);
      [...wrap.children].forEach(c => c.classList.remove("selected"));
    });
    ["next1","next2","next3","next4","next5","finish"].forEach(id=>{
      const b = document.getElementById(id);
      if (b) b.disabled = true;
    });

    const picWrap = document.getElementById("personaPic");
    picWrap.innerHTML = `<div class="personaPicFallback" id="personaPicFallback">（这里显示对应人格的猫头狮图片）<br/>请上传 assets/*.png</div>`;
    document.getElementById("contact").value = "";

    showStep(0);
  }

  // 初始化
  renderAll();
</script>
</body>
</html>
