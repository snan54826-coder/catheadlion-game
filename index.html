<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è®¤å…»ä¸€åªçŒ«å¤´ç‹®ï½œ30ç§’å°æ¸¸æˆ</title>
  <style>
    :root { --bg:#0b0f17; --card:#131a26; --text:#e7eefc; --muted:#9bb0d2; --line:#233149; --btn:#1f6feb; --ok:#22c55e; }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(1200px 800px at 20% 10%, #1b2a4a 0%, var(--bg) 55%),
                  radial-gradient(900px 600px at 80% 20%, #2b1845 0%, transparent 60%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      padding:18px;
    }
    .app{ width:min(980px, 100%); }
    .top{
      display:flex; gap:14px; align-items:center; justify-content:space-between;
      margin-bottom:14px;
    }
    .brand{
      display:flex; flex-direction:column; gap:4px;
    }
    .brand h1{ margin:0; font-size:18px; letter-spacing:.3px; }
    .brand p{ margin:0; font-size:12px; color:var(--muted); }
    .progressWrap{ flex:1; max-width:460px; display:flex; align-items:center; gap:10px; }
    .bar{ height:10px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10);
          border-radius:999px; overflow:hidden; flex:1; }
    .bar > div{ height:100%; width:0%; background:linear-gradient(90deg, #22c55e, #60a5fa); transition:width .35s ease; }
    .pct{ font-size:12px; color:var(--muted); min-width:52px; text-align:right; }
    .card{
      background:rgba(19,26,38,.86);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      border-radius:18px;
      overflow:hidden;
    }
    .pane{ padding:18px; display:none; }
    .pane.active{ display:block; }
    .hero{
      display:flex; gap:16px; align-items:stretch; flex-wrap:wrap;
    }
    .heroLeft{ flex:1; min-width:260px; }
    .heroRight{ width:min(360px, 100%); border-radius:16px; border:1px solid rgba(255,255,255,.10);
                background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
                padding:14px; }
    .bigTitle{ font-size:22px; margin:0 0 8px; }
    .desc{ margin:0; color:var(--muted); line-height:1.6; font-size:13px; }
    .grid{
      display:grid; grid-template-columns:repeat(2, minmax(0,1fr));
      gap:12px; margin-top:14px;
    }
    @media (max-width:720px){ .grid{ grid-template-columns:1fr; } .progressWrap{ display:none; } }
    .opt{
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:14px;
      cursor:pointer;
      transition:transform .08s ease, border-color .2s ease, background .2s ease;
      position:relative;
      user-select:none;
    }
    .opt:hover{ transform:translateY(-1px); border-color:rgba(96,165,250,.55); background:rgba(96,165,250,.08); }
    .opt .tag{ font-size:11px; color:var(--muted); }
    .opt .name{ font-weight:700; margin-top:6px; }
    .opt .hint{ margin-top:6px; font-size:12px; color:var(--muted); line-height:1.45; }
    .opt.selected{ border-color:rgba(34,197,94,.7); background:rgba(34,197,94,.10); }
    .opt.selected::after{
      content:"âœ“"; position:absolute; top:10px; right:12px;
      width:22px; height:22px; display:grid; place-items:center;
      border-radius:999px; background:rgba(34,197,94,.18); border:1px solid rgba(34,197,94,.55);
      color:var(--text); font-weight:900;
    }
    .footer{
      display:flex; gap:10px; justify-content:space-between; align-items:center;
      margin-top:16px; flex-wrap:wrap;
    }
    .btn{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--text);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      font-weight:650;
    }
    .btn.primary{ background:linear-gradient(180deg, rgba(31,111,235,.95), rgba(31,111,235,.75)); border-color:rgba(31,111,235,.65); }
    .btn:disabled{ opacity:.45; cursor:not-allowed; }
    .mini{ font-size:12px; color:var(--muted); }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      border:1px dashed rgba(255,255,255,.18);
      padding:8px 10px; border-radius:999px; color:var(--muted); font-size:12px;
    }

    /* è¯ä¹¦å¡ç‰‡ */
    .certWrap{ display:flex; gap:14px; flex-wrap:wrap; align-items:flex-start; }
    .cert{
      width:min(520px, 100%);
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      background:linear-gradient(180deg, rgba(96,165,250,.15), rgba(34,197,94,.10));
    }
    .certHeader{ padding:16px; border-bottom:1px solid rgba(255,255,255,.14); }
    .certHeader h2{ margin:0 0 6px; font-size:18px; }
    .certHeader p{ margin:0; color:var(--muted); font-size:12px; line-height:1.55; }
    .certBody{ padding:16px; display:grid; gap:10px; }
    .kv{ display:flex; justify-content:space-between; gap:10px; border:1px solid rgba(255,255,255,.12);
         border-radius:14px; padding:10px 12px; background:rgba(0,0,0,.12); }
    .kv b{ font-size:13px; }
    .kv span{ color:var(--muted); font-size:13px; }
    .certFooter{ padding:16px; border-top:1px solid rgba(255,255,255,.14); display:flex; gap:10px; flex-wrap:wrap; }
    .tips{ flex:1; min-width:240px; color:var(--muted); font-size:12px; line-height:1.6; }
    .rightCol{ flex:1; min-width:240px; }
    .qrHint{ margin-top:10px; color:var(--muted); font-size:12px; }
    .smallInput{
      width:100%;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);
      color:var(--text);
      padding:10px 12px; border-radius:12px;
      outline:none;
    }
    .row{ display:flex; gap:10px; flex-wrap:wrap; }
    .row .btn{ flex:1; min-width:180px; }
    .sep{ height:1px; background:rgba(255,255,255,.10); margin:12px 0; }
    a{ color:#9fd3ff; }
  </style>
</head>
<body>
  <div class="app">
    <div class="top">
      <div class="brand">
        <h1>è®¤å…»ä¸€åªçŒ«å¤´ç‹®ï½œ30ç§’å°æ¸¸æˆ</h1>
        <p>è¾¹ç©è¾¹é€‰ â†’ è‡ªåŠ¨ç”Ÿæˆã€ŒçŒ«å¤´ç‹®è®¤å…»è¯ä¹¦ã€ï¼›ä½ çš„é€‰æ‹©ä¼šå¸®åŠ©æˆ‘ä»¬åšæ–‡åˆ›è®¾è®¡ï¼ˆåŒ¿åï¼‰ã€‚</p>
      </div>
      <div class="progressWrap">
        <div class="bar"><div id="barFill"></div></div>
        <div class="pct" id="pctText">0%</div>
      </div>
    </div>

    <div class="card">
      <!-- P0 å¼€å§‹é¡µ -->
      <div class="pane active" data-step="0">
        <div class="hero">
          <div class="heroLeft">
            <h2 class="bigTitle">é¢†å–ä½ çš„çŒ«å¤´ç‹®å®ˆæŠ¤çµ</h2>
            <p class="desc">
              ä½ å°†ç”¨ 6 æ¬¡é€‰æ‹©ï¼Œè®¤å…»ä¸€åªçŒ«å¤´ç‹®ã€‚æ¯ä¸€æ­¥éƒ½å¾ˆè½»æ¾ï¼Œå®Œæˆåä¼šç”Ÿæˆä½ çš„ä¸“å±è¯ä¹¦å¡ç‰‡ï¼Œå¯æˆªå›¾åˆ†äº«ã€‚
            </p>
            <div class="sep"></div>
            <div class="pill">â± çº¦ 30ç§’</div>
            <div class="pill">ğŸ§¾ åŒ¿åè®°å½•</div>
            <div class="pill">ğŸ ç”Ÿæˆä¸“å±è¯ä¹¦</div>
            <div class="footer">
              <span class="mini">å‡†å¤‡å¥½äº†å—ï¼Ÿç‚¹å¼€å§‹å°±è¡Œã€‚</span>
              <button class="btn primary" onclick="goNext()">å¼€å§‹è®¤å…»</button>
            </div>
          </div>
         <div class="heroRight">
            <p class="desc"><b>å°æç¤ºï¼š</b>å¦‚æœä½ è¦çº¿ä¸‹æ‹‰äººæ‰«ç ï¼ŒæŠŠè¿™ä¸€é¡µæˆªå›¾åšæµ·æŠ¥æœ€æœ‰æ•ˆï¼š</p>
           <div class="sep"></div>
           <p class="desc">â€œæ‰«ç æŠ½ä½ çš„çŒ«å¤´ç‹®å®ˆæŠ¤å¡ï½œ30ç§’å‡ºç»“æœâ€</p>
           <p class="qrHint">ï¼ˆä½ å¯ä»¥åé¢æŠŠç½‘é¡µé“¾æ¥ç”ŸæˆäºŒç»´ç è´´åœ¨æµ·æŠ¥ä¸Šï¼‰</p>
         </div>
        </div>
      </div>

      <!-- P1 åœ°åŸŸ/é‡è§ -->
      <div class="pane" data-step="1">
        <h2 class="bigTitle">ç¬¬ 1 æ­¥ï¼šä½ åœ¨å“ªé‡Œé‡è§å®ƒï¼Ÿ</h2>
        <p class="desc">é€‰ä¸€ä¸ªæœ€æ¥è¿‘çš„åœºæ™¯ã€‚</p>
        <div class="grid" id="q1"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="next1" onclick="goNext()" disabled>ä¸‹ä¸€æ­¥</button>
        </div>
      </div>

      <!-- P2 é£æ ¼ -->
      <div class="pane" data-step="2">
        <h2 class="bigTitle">ç¬¬ 2 æ­¥ï¼šå®ƒæ›´åƒå“ªç§çŒ«å¤´ç‹®ï¼Ÿ</h2>
        <p class="desc">è¿™ä¼šå†³å®šä½ çš„â€œçŒ«å¤´ç‹®äººæ ¼ç±»å‹â€ã€‚</p>
        <div class="grid" id="q2"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="next2" onclick="goNext()" disabled>ä¸‹ä¸€æ­¥</button>
        </div>
      </div>

      <!-- P3 é…è‰²çš®è‚¤ -->
      <div class="pane" data-step="3">
        <h2 class="bigTitle">ç¬¬ 3 æ­¥ï¼šç»™å®ƒé€‰ä¸€å¥—çš®è‚¤é…è‰²</h2>
        <p class="desc">ä¸ç”¨æ‡‚è®¾è®¡ï¼Œå‡­ç›´è§‰é€‰ä½ è§‰å¾—å¥½çœ‹çš„ã€‚</p>
        <div class="grid" id="q3"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="next3" onclick="goNext()" disabled>ä¸‹ä¸€æ­¥</button>
        </div>
      </div>

      <!-- P4 äº§å“ç±»åˆ« -->
      <div class="pane" data-step="4">
        <h2 class="bigTitle">ç¬¬ 4 æ­¥ï¼šå®ƒè¦å¸¦ä»€ä¹ˆå‡ºé—¨ï¼Ÿ</h2>
        <p class="desc">ä½ é€‰çš„å°±æ˜¯ä½ æ›´æƒ³è¦çš„æ–‡åˆ›ç±»å‹ã€‚</p>
        <div class="grid" id="q4"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="next4" onclick="goNext()" disabled>ä¸‹ä¸€æ­¥</button>
        </div>
      </div>

      <!-- P5 ä»·æ ¼å¸¦ -->
      <div class="pane" data-step="5">
        <h2 class="bigTitle">ç¬¬ 5 æ­¥ï¼šä½ æ„¿æ„èŠ±å¤šå°‘é’±å¸¦èµ°å®ƒï¼Ÿ</h2>
        <p class="desc">åˆ«çº ç»“ï¼Œé€‰ä½ æœ€èˆ’æœçš„ä»·æ ¼åŒºé—´ã€‚</p>
        <div class="grid" id="q5"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="next5" onclick="goNext()" disabled>ä¸‹ä¸€æ­¥</button>
        </div>
      </div>

      <!-- P6 ä¼ æ’­æ–¹å¼ -->
      <div class="pane" data-step="6">
        <h2 class="bigTitle">ç¬¬ 6 æ­¥ï¼šè®©æ›´å¤šäººçœ‹è§å®ƒï¼Œä½ æ›´æ„¿æ„ï¼Ÿ</h2>
        <p class="desc">è¿™ä¼šå†³å®šæˆ‘ä»¬æ›´ä¼˜å…ˆåšå“ªç§â€œç°ä»£ä¼ æ‰¿â€æ–¹å¼ã€‚</p>
        <div class="grid" id="q6"></div>
        <div class="footer">
          <button class="btn" onclick="goPrev()">ä¸Šä¸€æ­¥</button>
          <button class="btn primary" id="finish" onclick="finish()" disabled>ç”Ÿæˆè®¤å…»è¯ä¹¦</button>
        </div>
      </div>

      <!-- P7 ç»“æœé¡µ -->
      <div class="pane" data-step="7">
        <h2 class="bigTitle">å®Œæˆï¼è¿™æ˜¯ä½ çš„çŒ«å¤´ç‹®è®¤å…»è¯ä¹¦</h2>
        <p class="desc">ä½ å¯ä»¥æˆªå›¾åˆ†äº«ï¼Œä¹Ÿå¯ä»¥æŠŠç»“æœæäº¤ç»™æˆ‘ä»¬ï¼ˆç”¨äºæ–‡åˆ›è®¾è®¡ç ”ç©¶ï¼‰ã€‚</p>

        <div class="certWrap">
          <div class="cert" id="cert">
            <div class="certHeader">
              <h2 id="certTitle">çŒ«å¤´ç‹® Â· è®¤å…»è¯ä¹¦</h2>
              <p id="certSub">æ­å–œä½ æˆåŠŸè®¤å…»ä¸€åªçŒ«å¤´ç‹®å®ˆæŠ¤çµã€‚ä½ çš„é€‰æ‹©å°†å¸®åŠ©æˆ‘ä»¬æŠŠéé—åšå¾—æ›´å¥½çœ‹ã€æ›´å¥½ç©ã€æ›´å¯æŒç»­ã€‚</p>
            </div>
            <div class="certBody" id="certBody"></div>
            <div class="certFooter">
              <div class="tips">
                <b>åˆ†äº«å°æŠ€å·§ï¼š</b>æ‰‹æœºç›´æ¥æˆªå›¾è¿™ä¸€å—å‘ç¾¤é‡Œå³å¯ã€‚<br/>
                æƒ³æ›´åƒâ€œæ¸¸æˆâ€ï¼Ÿä½ å¯ä»¥æŠŠæ¯ä¸€æ­¥çš„é€‰é¡¹æ¢æˆå›¾ç‰‡å¡ï¼ˆCanvaåš4å¼ å›¾å³å¯ï¼‰ã€‚
              </div>
            </div>
          </div>

          <div class="rightCol">
            <div class="pill">ğŸ“Œ å¯é€‰ï¼šä¸€é”®æäº¤æ•°æ®ï¼ˆå…åç«¯ï¼‰</div>
            <p class="desc" style="margin-top:10px;">
              æœ€ç®€å•çš„æ”¶é›†æ–¹å¼ï¼šç”¨ <b>Google è¡¨å•</b> æˆ–ä»»æ„è¡¨å•æœåŠ¡ã€‚<br/>
              ä½ åªè¦æŠŠä¸‹é¢çš„â€œè¡¨å•é¢„å¡«é“¾æ¥æ¨¡æ¿â€ç²˜åˆ°ä»£ç é‡Œï¼Œå°±èƒ½ç‚¹æŒ‰é’®æäº¤ã€‚
            </p>

            <div class="sep"></div>

            <p class="desc"><b>ï¼ˆå¯ä¸åšï¼‰è¡¨å•æäº¤æŒ‰é’®ï¼š</b></p>
            <div class="row">
              <button class="btn primary" onclick="submitToForm()">æäº¤æˆ‘çš„é€‰æ‹©ï¼ˆå¯é€‰ï¼‰</button>
              <button class="btn" onclick="restart()">å†è®¤å…»ä¸€æ¬¡</button>
            </div>

            <p class="qrHint">
              <b>å¦‚æœä½ æš‚æ—¶ä¸åšè¡¨å•ï¼š</b>ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè®©å¤§å®¶æˆªå›¾åˆ†äº«ï¼Œä½ çº¿ä¸‹å†ç»Ÿè®¡ä¹Ÿè¡Œã€‚<br/>
              éœ€è¦è‡ªåŠ¨ç»Ÿè®¡æ—¶ï¼Œå†è¡¥è¡¨å•é“¾æ¥å³å¯ã€‚
            </p>

            <div class="sep"></div>

            <p class="desc"><b>ï¼ˆå¯é€‰ï¼‰ç•™ä¸‹è”ç³»æ–¹å¼å‚ä¸ä½“éªŒå†…æµ‹ï¼š</b></p>
            <input class="smallInput" id="contact" placeholder="å¾®ä¿¡/QQ/é‚®ç®±ï¼ˆé€‰å¡«ï¼Œä¸å¡«ä¹Ÿå¯ï¼‰" />
            <p class="qrHint">ï¼ˆå¦‚æœä½ åšè¡¨å•æäº¤ï¼Œå¯æŠŠè¿™ä¸ªå­—æ®µä¹Ÿä¸€å¹¶æäº¤ï¼‰</p>
          </div>
        </div>

        <div class="footer">
          <button class="btn" onclick="goPrev()">è¿”å›ä¸Šä¸€é¡µ</button>
          <button class="btn primary" onclick="copySummary()">å¤åˆ¶æˆ‘çš„ç»“æœæ–‡æœ¬</button>
        </div>
      </div>
    </div>
  </div>

<script>
  // ===== 1) é¢˜åº“ï¼šä½ å¯ä»¥ç›´æ¥æ”¹æ–‡æ¡ˆï¼ˆæœ€é€‚åˆå°ç™½ï¼‰ =====
  const questions = {
    q1: {
      key: "meet",
      nextBtnId: "next1",
      title: "ä½ åœ¨å“ªé‡Œé‡è§å®ƒï¼Ÿ",
      options: [
        { label:"æ²³æºæœ¬åœ°", tag:"æœ¬åœ°", hint:"æˆ‘åœ¨æ²³æºç”Ÿæ´»/æˆé•¿", value:"æ²³æºæœ¬åœ°" },
        { label:"æ²³æºå­¦ä¹ /å·¥ä½œ", tag:"å¸¸é©»", hint:"åœ¨æ²³æºä¸Šå­¦æˆ–ä¸Šç­", value:"åœ¨æ²³æºå­¦ä¹ /å·¥ä½œ" },
        { label:"æ¥æ²³æºæ—…æ¸¸", tag:"æ¸¸å®¢", hint:"çŸ­æœŸåˆ°è®¿/æ—…è¡Œ", value:"æ¥æ²³æºæ—…æ¸¸" },
        { label:"çº¿ä¸Šåˆ·åˆ°", tag:"çº¿ä¸Š", hint:"çŸ­è§†é¢‘/ç¤¾äº¤å¹³å°çœ‹åˆ°", value:"çº¿ä¸Šåˆ·åˆ°" },
      ]
    },
    q2: {
      key: "style",
      nextBtnId: "next2",
      title: "å®ƒæ›´åƒå“ªç§çŒ«å¤´ç‹®ï¼Ÿ",
      options: [
        { label:"ä¼ ç»Ÿå¨æ­¦", tag:"åŸå‘³", hint:"æ›´å¼ºè°ƒä»ªå¼æ„Ÿä¸æ°”åŠ¿", value:"ä¼ ç»Ÿå¨æ­¦", typeScore:{trad:2} },
        { label:"Qç‰ˆå¯çˆ±", tag:"æ²»æ„ˆ", hint:"æ›´äº²å’Œï¼Œé€‚åˆåšå‘¨è¾¹", value:"Qç‰ˆå¯çˆ±", typeScore:{cute:2} },
        { label:"å›½æ½®é…·ç‚«", tag:"æ½®æµ", hint:"æ›´é€‚åˆæ½®ç©/è”å", value:"å›½æ½®é…·ç‚«", typeScore:{cool:2} },
        { label:"æç®€ç¬¦å·", tag:"è®¾è®¡", hint:"æ›´ç°ä»£ï¼Œæ›´åƒlogo/å›¾å½¢", value:"æç®€ç¬¦å·", typeScore:{minimal:2} },
      ]
    },
    q3: {
      key: "color",
      nextBtnId: "next3",
      title: "ç»™å®ƒé€‰ä¸€å¥—çš®è‚¤é…è‰²",
      options: [
        { label:"çº¢é‡‘ä¼ ç»Ÿ", tag:"å–œåº†", hint:"èŠ‚åº†æ°›å›´å¼ºï¼Œè¾¨è¯†åº¦é«˜", value:"çº¢é‡‘ä¼ ç»Ÿ", typeScore:{trad:1} },
        { label:"ä½é¥±å’Œæ–°ä¸­å¼", tag:"è€çœ‹", hint:"æ›´æ¸©æŸ”æ›´é«˜çº§", value:"ä½é¥±å’Œæ–°ä¸­å¼", typeScore:{minimal:1} },
        { label:"é»‘é‡‘é…·ç‚«", tag:"é…·æ„Ÿ", hint:"æ›´æ½®æ›´é…·ï¼Œé€‚åˆè¡—å¤´æ„Ÿ", value:"é»‘é‡‘é…·ç‚«", typeScore:{cool:1} },
        { label:"å½©è‰²æ½®ç©", tag:"è·³è„±", hint:"æ›´æ´»æ³¼ï¼Œé€‚åˆå¹´è½»åœˆå±‚", value:"å½©è‰²æ½®ç©", typeScore:{cute:1, cool:1} },
      ]
    },
    q4: {
      key: "product",
      nextBtnId: "next4",
      title: "å®ƒè¦å¸¦ä»€ä¹ˆå‡ºé—¨ï¼Ÿ",
      options: [
        { label:"å¾½ç« /å†°ç®±è´´", tag:"å°ç‰©", hint:"ä¾¿å®œå¥½å¸¦ï¼Œé€‚åˆçºªå¿µ", value:"å¾½ç« /å†°ç®±è´´", typeScore:{minimal:1} },
        { label:"å¸†å¸ƒè¢‹/æœé¥°", tag:"ç©¿æˆ´", hint:"æ—¥å¸¸å¯ç”¨ï¼Œæ›å…‰ç‡é«˜", value:"å¸†å¸ƒè¢‹/æœé¥°", typeScore:{cool:1} },
        { label:"æ‰‹åŠ/ç›²ç›’", tag:"æ½®ç©", hint:"æ”¶è—å±æ€§å¼ºï¼Œé€‚åˆIP", value:"æ‰‹åŠ/ç›²ç›’", typeScore:{cool:2} },
        { label:"æ–‡å…·/è´´çº¸", tag:"å­¦ä¹ ", hint:"å­¦ç”Ÿå…šå‹å¥½ï¼Œå¥½ä¼ æ’­", value:"æ–‡å…·/è´´çº¸", typeScore:{cute:1} },
        { label:"æ‰‹ä½œä½“éªŒåˆ¸", tag:"ä½“éªŒ", hint:"å‚ä¸æ„Ÿå¼ºï¼Œé€‚åˆç ”å­¦", value:"æ‰‹ä½œä½“éªŒåˆ¸", typeScore:{trad:1, cute:1} },
      ]
    },
    q5: {
      key: "price",
      nextBtnId: "next5",
      title: "ä½ æ„¿æ„èŠ±å¤šå°‘é’±å¸¦èµ°å®ƒï¼Ÿ",
      options: [
        { label:"â‰¤29å…ƒ", tag:"å…¥é—¨", hint:"éšæ‰‹ä¹°", value:"â‰¤29å…ƒ" },
        { label:"30â€“59å…ƒ", tag:"å¸¸è§", hint:"å¤šæ•°å°ç‰©/æ–‡å…·", value:"30â€“59å…ƒ" },
        { label:"60â€“99å…ƒ", tag:"ç¤¼ç‰©", hint:"å°ç¤¼å“æ›´ä½“é¢", value:"60â€“99å…ƒ" },
        { label:"100â€“199å…ƒ", tag:"å“è´¨", hint:"æ›´æœ‰è´¨æ„Ÿ/ç¤¼ç›’", value:"100â€“199å…ƒ" },
        { label:"200å…ƒä»¥ä¸Š", tag:"æ”¶è—", hint:"æ‰‹å·¥/é™å®š/æ”¶è—æ¬¾", value:"200å…ƒä»¥ä¸Š" },
      ]
    },
    q6: {
      key: "channel",
      nextBtnId: "finish",
      title: "è®©æ›´å¤šäººçœ‹è§å®ƒï¼Œä½ æ›´æ„¿æ„ï¼Ÿ",
      options: [
        { label:"çŸ­è§†é¢‘/ç›´æ’­", tag:"çº¿ä¸Š", hint:"å¿«ã€å®¹æ˜“æ‰©æ•£", value:"çŸ­è§†é¢‘/ç›´æ’­" },
        { label:"çº¿ä¸‹æ¼”å‡º+è®²è§£", tag:"ç°åœº", hint:"æœ€æœ‰æ°›å›´ä¸éœ‡æ’¼", value:"çº¿ä¸‹æ¼”å‡º+è®²è§£" },
        { label:"æ‰‹ä½œä½“éªŒè¯¾", tag:"ä½“éªŒ", hint:"åšä¸€æ¬¡å°±è®°ä½", value:"æ‰‹ä½œä½“éªŒè¯¾" },
        { label:"æ ¡å›­æ´»åŠ¨/ç¤¾å›¢", tag:"æ ¡å›­", hint:"è§¦è¾¾å¹´è½»äººæ›´ç¨³å®š", value:"æ ¡å›­æ´»åŠ¨/ç¤¾å›¢" },
        { label:"ARæ»¤é•œ/å°æ¸¸æˆ", tag:"äº’åŠ¨", hint:"å¥½ç©å¥½åˆ†äº«", value:"ARæ»¤é•œ/å°æ¸¸æˆ" },
      ]
    },
  };

  // ===== 2) çŠ¶æ€ =====
  let step = 0;                 // 0..7
  const answers = {};           // key -> value
  let typeScore = { trad:0, cute:0, cool:0, minimal:0 };

  // ===== 3) æ¸²æŸ“é¢˜ç›® =====
  function renderAll(){
    renderQuestion("q1");
    renderQuestion("q2");
    renderQuestion("q3");
    renderQuestion("q4");
    renderQuestion("q5");
    renderQuestion("q6");
    updateProgress();
  }

  function renderQuestion(qid){
    const q = questions[qid];
    const el = document.getElementById(qid);
    el.innerHTML = "";
    q.options.forEach((opt, idx) => {
      const d = document.createElement("div");
      d.className = "opt";
      d.innerHTML = `
        <div class="tag">${opt.tag}</div>
        <div class="name">${opt.label}</div>
        <div class="hint">${opt.hint}</div>
      `;
      d.onclick = () => selectOption(qid, idx, d);
      el.appendChild(d);
    });
  }

  function selectOption(qid, idx, clickedEl){
    const q = questions[qid];
    answers[q.key] = q.options[idx].value;

    // UI é€‰ä¸­æ€
    const parent = document.getElementById(qid);
    [...parent.children].forEach(c => c.classList.remove("selected"));
    clickedEl.classList.add("selected");

    // è®¡åˆ†ï¼ˆä»…å¯¹åŒ…å« typeScore çš„é¢˜ï¼‰
    // ç®€å•å¤„ç†ï¼šæ¯æ¬¡é€‰æ‹©å…ˆé‡ç®—æ€»åˆ†ï¼ˆé¿å…æ¢é€‰é¡¹å¯¼è‡´åˆ†å åŠ ï¼‰
    recomputeTypeScore();

    // å¼€å¯ä¸‹ä¸€æ­¥æŒ‰é’®
    const btn = document.getElementById(q.nextBtnId);
    btn.disabled = false;
  }

  function recomputeTypeScore(){
    typeScore = { trad:0, cute:0, cool:0, minimal:0 };
    // éå†æ‰€æœ‰é¢˜çš„å·²é€‰é¡¹ï¼Œç´¯åŠ åˆ†æ•°
    for (const qid in questions){
      const q = questions[qid];
      const chosenValue = answers[q.key];
      if (!chosenValue) continue;
      const opt = q.options.find(o => o.value === chosenValue);
      if (opt && opt.typeScore){
        for (const k in opt.typeScore){
          typeScore[k] += opt.typeScore[k];
        }
      }
    }
  }

  // ===== 4) é¡µé¢åˆ‡æ¢ =====
  function showStep(s){
    step = s;
    document.querySelectorAll(".pane").forEach(p => p.classList.remove("active"));
    document.querySelector(`.pane[data-step="${s}"]`).classList.add("active");
    updateProgress();
    window.scrollTo({top:0, behavior:"smooth"});
  }
  function goNext(){ showStep(Math.min(step + 1, 7)); }
  function goPrev(){ showStep(Math.max(step - 1, 0)); }

  function updateProgress(){
    const totalPlayableSteps = 7; // 0~6æ˜¯è¿‡ç¨‹ï¼Œ7æ˜¯ç»“æœé¡µ
    const pct = Math.round((Math.min(step,6) / 6) * 100);
    document.getElementById("barFill").style.width = pct + "%";
    document.getElementById("pctText").textContent = pct + "%";
  }

  // ===== 5) ç”Ÿæˆç»“æœé¡µ =====
  function finish(){
    // å¿…å¡«æ£€æŸ¥
    const required = ["meet","style","color","product","price","channel"];
    const missing = required.filter(k => !answers[k]);
    if (missing.length) { alert("è¿˜æœ‰é€‰é¡¹æ²¡é€‰å®Œå™¢ï½"); return; }

    const persona = calcPersona();
    buildCertificate(persona);
    showStep(7);
  }

  function calcPersona(){
    // å¦‚æœåˆ†æ•°éƒ½0ï¼Œç»™é»˜è®¤
    const entries = Object.entries(typeScore);
    entries.sort((a,b)=> b[1]-a[1]);
    const top = entries[0][0];

    const map = {
      trad: { name:"ä¼ ç»Ÿå®ˆæŠ¤å‹", vibe:"æ›´é‡è§†ä»ªå¼æ„Ÿä¸æ–‡åŒ–åŸçœŸæ€§", rec:["çº¿ä¸‹æ¼”å‡º+è®²è§£","æ‰‹ä½œä½“éªŒè¯¾"], products:["ç¤¼ç›’/ä¼´æ‰‹ç¤¼","å¸¦æº¯æºå¡çš„æ‘†ä»¶","å·¥è‰ºæ„Ÿçºªå¿µå“"] },
      cute: { name:"æ²»æ„ˆèŒç³»å‹", vibe:"æ›´å–œæ¬¢äº²å’Œå¯çˆ±çš„è¡¨è¾¾æ–¹å¼", rec:["çŸ­è§†é¢‘/ç›´æ’­","æ ¡å›­æ´»åŠ¨/ç¤¾å›¢"], products:["è´´çº¸/æ–‡å…·","æ¯›ç»’/æŒ‚ä»¶","å¾½ç« /å†°ç®±è´´"] },
      cool: { name:"å›½æ½®ç©å®¶å‹", vibe:"å–œæ¬¢æ½®æµã€é…·æ„Ÿä¸æ”¶è—å±æ€§", rec:["çŸ­è§†é¢‘/ç›´æ’­","ARæ»¤é•œ/å°æ¸¸æˆ"], products:["æ‰‹åŠ/ç›²ç›’","è”åæœé¥°","é…·ç‚«æ‘†ä»¶"] },
      minimal: { name:"æç®€è®¾è®¡å‹", vibe:"åçˆ±ç®€æ´è€çœ‹çš„ç¬¦å·åŒ–è®¾è®¡", rec:["å±•è§ˆ/å›¾æ–‡ç§‘æ™®","åŸå¸‚æ‰“å¡"], products:["æ—¥ç”¨å°ç‰©","æ–°ä¸­å¼å®¶å±…","logoåŒ–é…é¥°"] },
    };
    return map[top] || { name:"çŒ«å¤´ç‹®æ¢ç´¢å‹", vibe:"å–œæ¬¢å°è¯•ä¸åŒè¡¨è¾¾", rec:["çŸ­è§†é¢‘/ç›´æ’­","æ‰‹ä½œä½“éªŒè¯¾"], products:["å°ç‰©","æ–‡å…·","æ‘†ä»¶"] };
  }

  function buildCertificate(persona){
    const title = `ä½ çš„çŒ«å¤´ç‹®äººæ ¼ï¼š${persona.name}`;
    document.getElementById("certTitle").textContent = title;

    const sub = `é£æ ¼åå¥½ï¼š${answers.style}ï½œ${persona.vibe}ã€‚æŠŠè¿™ä»½å¡ç‰‡æˆªå›¾åˆ†äº«ç»™æœ‹å‹ï¼Œçœ‹çœ‹ä½ ä»¬åƒå“ªç§çŒ«å¤´ç‹®ã€‚`;
    document.getElementById("certSub").textContent = sub;

    const body = document.getElementById("certBody");
    body.innerHTML = "";

    const rows = [
      ["é‡è§åœ°ç‚¹", answers.meet],
      ["å½¢è±¡é£æ ¼", answers.style],
      ["çš®è‚¤é…è‰²", answers.color],
      ["æ›´æƒ³è¦çš„æ–‡åˆ›", answers.product],
      ["èˆ’é€‚ä»·æ ¼å¸¦", answers.price],
      ["æ›´æ„¿æ„çš„ä¼ æ’­æ–¹å¼", answers.channel],
      ["æ¨èä¼ æ’­æ–¹å‘", persona.rec.join(" / ")],
      ["æ¨èäº§å“æ–¹å‘", persona.products.join(" / ")],
      ["ç”Ÿæˆæ—¶é—´", new Date().toLocaleString()],
    ];

    rows.forEach(([k,v])=>{
      const div = document.createElement("div");
      div.className = "kv";
      div.innerHTML = `<b>${k}</b><span>${escapeHtml(String(v))}</span>`;
      body.appendChild(div);
    });
  }

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, (c)=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));
  }

  // ===== 6) å¯é€‰ï¼šæäº¤åˆ°è¡¨å•ï¼ˆæœ€ç®€å•å…åç«¯ï¼‰ =====
  // åšæ³•ï¼šç”¨ Google è¡¨å•â€œé¢„å¡«é“¾æ¥ï¼ˆprefill linkï¼‰â€
  // ä½ åªè¦æŠŠ FORM_PREFILL_URL æ”¹æˆä½ çš„é“¾æ¥æ¨¡æ¿å³å¯ã€‚
  //
  // å¦‚ä½•å¾—åˆ°é¢„å¡«é“¾æ¥ï¼š
  // 1) æ–°å»º Google è¡¨å•ï¼Œå»º 6 ä¸ªçŸ­ç­”é¢˜ï¼ˆé‡è§/é£æ ¼/é…è‰²/å“ç±»/ä»·æ ¼/ä¼ æ’­ï¼‰+ 1ä¸ªè”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰
  // 2) å³ä¸Šè§’â‹® â†’ è·å–é¢„å¡«é“¾æ¥ï¼ˆGet pre-filled linkï¼‰
  // 3) éšä¾¿å¡«ä¸€æ¬¡ï¼Œæäº¤åå¾—åˆ°ä¸€ä¸ªå¸¦ entry.xxxxx= çš„é“¾æ¥
  // 4) æŠŠä¸‹é¢å¸¸é‡æ›¿æ¢æˆé‚£ä¸ªé“¾æ¥ï¼Œå¹¶æŠŠå€¼éƒ¨åˆ†ç•™ç©ºè®©ä»£ç æ‹¼æ¥
  //
  const FORM_PREFILL_URL = ""; // â† ä¾‹å¦‚ï¼š"https://docs.google.com/forms/d/e/xxxx/viewform?usp=pp_url&entry.111111=&entry.222222=&..."

  function submitToForm(){
    if (!FORM_PREFILL_URL){
      alert("ä½ è¿˜æ²¡é…ç½®è¡¨å•é¢„å¡«é“¾æ¥ï¼ˆFORM_PREFILL_URLï¼‰ã€‚å…ˆä¸æäº¤ä¹Ÿå¯ä»¥ï¼Œæˆªå›¾åˆ†äº«å°±è¡Œã€‚");
      return;
    }
    const params = {
      // è¿™é‡Œçš„ key è¦å¯¹åº”ä½ è¡¨å•é¢„å¡«é“¾æ¥é‡Œçš„ entry.XXXXXXï¼ˆä½ æ‹¿åˆ°é“¾æ¥åæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ å¯¹ï¼‰
      // ä¾‹ï¼š "entry.111111": answers.meet,
      //     "entry.222222": answers.style,
    };

    // ä¸ºäº†è®©ä½ å°ç™½æ›´ä¸å®¹æ˜“é”™ï¼Œè¿™é‡Œç›´æ¥ç”¨â€œå­—ç¬¦ä¸²æ›¿æ¢â€çš„æœ€ç¨³æ–¹æ³•ï¼š
    // ä½ æŠŠé¢„å¡«é“¾æ¥é‡Œæ¯ä¸ª entry çš„â€œå€¼â€ç•™ç©ºï¼Œä»£ç ä¼šåœ¨æœ«å°¾è¿½åŠ å‚æ•°è¦†ç›–ã€‚
// å…ˆæŠŠ FORM_PREFILL_URL å¡«ä¸Šï¼ˆå°±æ˜¯ä½ å‘æˆ‘çš„é‚£æ¡ï¼‰
const FORM_PREFILL_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfQdWA2sURLMyj_JPBvYuD7mZZGWCpxiITvvSLAffAv9nwptg/viewform?usp=pp_url";

function submitToForm(){
  if (!FORM_PREFILL_URL){
    alert("è¿˜æ²¡é…ç½® FORM_PREFILL_URL");
    return;
  }

  const url = new URL(FORM_PREFILL_URL);

  // ä½ çš„è¡¨å• entry å¯¹åº”å…³ç³»ï¼ˆå·²æŒ‰ä½ å‘çš„é“¾æ¥å†™å¥½ï¼‰
  url.searchParams.set("entry.1072811711", answers.meet || "");
  url.searchParams.set("entry.596716448",  answers.style || "");
  url.searchParams.set("entry.238841919",  answers.color || "");
  url.searchParams.set("entry.971216654",  answers.product || "");
  url.searchParams.set("entry.1003279811", answers.price || "");
  url.searchParams.set("entry.1293040629", answers.channel || "");
  url.searchParams.set("entry.1289307667", document.getElementById("contact").value || "");

  // âœ… åŒé¡µè·³è½¬ï¼šå¾®ä¿¡/QQ å†…ç½®æµè§ˆå™¨ä¹Ÿæ›´å®¹æ˜“æˆåŠŸ
  window.location.href = url.toString();
}


  // ===== 7) å¤åˆ¶ç»“æœæ–‡æœ¬ï¼ˆæ–¹ä¾¿ä½ ç²˜ç¾¤é‡Œæˆ–å­˜æ¡£ï¼‰ =====
  function copySummary(){
    const lines = [
      "ã€çŒ«å¤´ç‹®è®¤å…»ç»“æœã€‘",
      `é‡è§ï¼š${answers.meet || ""}`,
      `é£æ ¼ï¼š${answers.style || ""}`,
      `é…è‰²ï¼š${answers.color || ""}`,
      `æ–‡åˆ›ï¼š${answers.product || ""}`,
      `ä»·æ ¼ï¼š${answers.price || ""}`,
      `ä¼ æ’­ï¼š${answers.channel || ""}`,
    ].join("\n");

    navigator.clipboard?.writeText(lines).then(()=>{
      alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
    }).catch(()=>{
      // å…¼å®¹æ—§æµè§ˆå™¨
      const ta = document.createElement("textarea");
      ta.value = lines;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
    });
  }

  function restart(){
    // ç®€å•é‡ç½®
    for (const k in answers) delete answers[k];
    typeScore = { trad:0, cute:0, cool:0, minimal:0 };

    // æ¸…é™¤é€‰ä¸­æ€ + æŒ‰é’®ç¦ç”¨
    ["q1","q2","q3","q4","q5","q6"].forEach(qid=>{
      const wrap = document.getElementById(qid);
      [...wrap.children].forEach(c => c.classList.remove("selected"));
    });
    ["next1","next2","next3","next4","next5","finish"].forEach(id=>{
      const b = document.getElementById(id);
      if (b) b.disabled = true;
    });
    document.getElementById("contact").value = "";
    showStep(0);
  }

  // åˆå§‹åŒ–
  renderAll();

  // ç»™æœ€åä¸€æ­¥æŒ‰é’®å¯ç”¨é€»è¾‘ï¼šå½“é€‰æ‹©q6åå¯ç”¨finish
  // å·²åœ¨ selectOption é‡Œåšäº†é€šç”¨ next æŒ‰é’®å¯ç”¨
</script>
</body>
</html>



